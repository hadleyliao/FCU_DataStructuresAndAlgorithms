<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üåô ÁæéÂ∞ëÂ•≥Êà∞Â£´Áï™ËåÑÈêò</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
        font-family: 'Comic Sans MS', cursive;
        background: radial-gradient(circle at 30% 20%, #ff69b4 0%, #ff1493 20%, #4169e1 40%, #9400d3 60%, #000033 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        position: relative;
    }
    .stars {
        position: absolute;
        width: 100%;
        height: 100%;
        background-image:
            radial-gradient(2px 2px at 20px 30px, #fff, transparent),
            radial-gradient(2px 2px at 40px 70px, #ffd700, transparent),
            radial-gradient(1px 1px at 90px 40px, #fff, transparent),
            radial-gradient(1px 1px at 130px 80px, #fff, transparent),
            radial-gradient(2px 2px at 160px 30px, #ffd700, transparent);
        background-repeat: repeat;
        background-size: 200px 100px;
        animation: twinkle 3s linear infinite;
    }
    @keyframes twinkle {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
    .container {
        background: linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(255,182,193,0.9) 100%);
        border-radius: 30px;
        padding: 40px;
        text-align: center;
        box-shadow: 0 0 40px rgba(255,20,147,0.5), 0 0 80px rgba(255,20,147,0.3);
        backdrop-filter: blur(15px);
        border: 4px solid #ff69b4;
        position: relative;
        animation: moonGlow 4s ease-in-out infinite;
    }
    @keyframes moonGlow {
        0%, 100% { box-shadow: 0 0 40px rgba(255,20,147,0.5), 0 0 80px rgba(255,20,147,0.3); }
        50% { box-shadow: 0 0 60px rgba(255,20,147,0.8), 0 0 120px rgba(255,20,147,0.5); }
    }
    .moon {
        font-size: 80px;
        margin-bottom: 20px;
        animation: moonPulse 3s ease-in-out infinite;
        filter: drop-shadow(0 0 20px rgba(255,215,0,0.8));
    }
    @keyframes moonPulse {
        0%, 100% { transform: scale(1) rotate(0deg); }
        50% { transform: scale(1.15) rotate(10deg); }
    }
    .timer-display {
        font-size: 60px;
        background: linear-gradient(45deg, #ff69b4, #ff1493, #4169e1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: bold;
        margin: 20px 0;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        min-height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: shimmer 2s linear infinite;
    }
    @keyframes shimmer {
        0% { background-position: -200px 0; }
        100% { background-position: 200px 0; }
    }
    .controls {
        margin: 30px 0;
    }
    input[type="number"] {
        width: 80px;
        padding: 12px;
        font-size: 18px;
        border: 3px solid #ff69b4;
        border-radius: 20px;
        text-align: center;
        margin: 0 10px;
        background: linear-gradient(145deg, #fff, #ffb6c1);
        color: #ff1493;
        font-weight: bold;
        box-shadow: inset 0 2px 5px rgba(255,20,147,0.2);
    }
    .time-inputs {
        margin: 20px 0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }
    .time-inputs span {
        color: #ff1493;
        font-weight: bold;
        font-size: 18px;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }
    button {
        padding: 15px 30px;
        font-size: 18px;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        margin: 10px;
        font-weight: bold;
        transition: all 0.3s ease;
        font-family: 'Comic Sans MS', cursive;
        position: relative;
        overflow: hidden;
    }
    button::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
        transform: rotate(45deg);
        transition: all 0.5s;
        opacity: 0;
    }
    button:hover::before {
        animation: shine 0.5s ease-in-out;
    }
    @keyframes shine {
        0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
        50% { opacity: 1; }
        100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
    }
    .start-btn {
        background: linear-gradient(45deg, #ff69b4, #ff1493);
        color: white;
        box-shadow: 0 8px 25px rgba(255,20,147,0.4);
    }
    .start-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 35px rgba(255,20,147,0.6);
    }
    .stop-btn {
        background: linear-gradient(45deg, #ffd700, #ff8c00);
        color: white;
        box-shadow: 0 8px 25px rgba(255,215,0,0.4);
    }
    .stop-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 35px rgba(255,215,0,0.6);
    }
    .reset-btn {
        background: linear-gradient(45deg, #4169e1, #9400d3);
        color: white;
        box-shadow: 0 8px 25px rgba(65,105,225,0.4);
    }
    .reset-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 35px rgba(65,105,225,0.6);
    }
    .status {
        margin-top: 20px;
        font-size: 20px;
        background: linear-gradient(45deg, #ff69b4, #4169e1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: bold;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    .magical-effects {
        position: absolute;
        top: -20px;
        left: -20px;
        right: -20px;
        bottom: -20px;
        pointer-events: none;
        overflow: hidden;
        border-radius: 40px;
    }
    .sparkle {
        position: absolute;
        color: #ffd700;
        font-size: 24px;
        animation: sparkleFloat 3s ease-in-out infinite;
    }
    @keyframes sparkleFloat {
        0%, 100% { transform: translateY(0) rotate(0deg) scale(0.8); opacity: 0.7; }
        50% { transform: translateY(-30px) rotate(180deg) scale(1.2); opacity: 1; }
    }
    .finished {
        animation: transformation 2s ease-in-out infinite;
    }
    @keyframes transformation {
        0%, 100% { transform: scale(1) rotate(0deg); }
        25% { transform: scale(1.05) rotate(-2deg); }
        50% { transform: scale(1.1) rotate(0deg); }
        75% { transform: scale(1.05) rotate(2deg); }
    }
    .title {
        font-size: 24px;
        background: linear-gradient(45deg, #ff69b4, #ff1493, #4169e1, #9400d3);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: bold;
        margin-bottom: 20px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
<div class="stars"></div>

<div class="container" id="container">
  <div class="magical-effects">
    <span class="sparkle" style="top: 10%; left: 10%; animation-delay: 0s;">‚ú®</span>
    <span class="sparkle" style="top: 20%; right: 15%; animation-delay: 1s;">‚≠ê</span>
    <span class="sparkle" style="bottom: 20%; left: 20%; animation-delay: 2s;">üí´</span>
    <span class="sparkle" style="bottom: 15%; right: 10%; animation-delay: 0.5s;">üåü</span>
    <span class="sparkle" style="top: 40%; left: 5%; animation-delay: 1.5s;">‚ú®</span>
    <span class="sparkle" style="top: 60%; right: 5%; animation-delay: 2.5s;">‚≠ê</span>
  </div>

  <div class="title">ÊúàÈáéÂÖîÁöÑÂ∞àÊ≥®ÊôÇÂÖâ</div>
  <div class="moon">üåô</div>

  <div class="time-inputs">
    <input type="number" id="minutes" value="25" min="0" max="99">
    <span>ÂàÜ</span>
    <input type="number" id="seconds" value="0" min="0" max="59">
    <span>Áßí</span>
  </div>

  <div class="timer-display" id="display">25:00</div>

  <div class="controls">
    <button class="start-btn" onclick="startTimer()">start</button>
    <button class="stop-btn" onclick="stopTimer()">stop</button>
    <button class="reset-btn" onclick="resetTimer()">reset</button>
  </div>

  <div class="status" id="status">ÁÇ∫‰∫ÜÊÑõËàáÊ≠£Áæ©ÔºåÊ∫ñÂÇôÂ•Ω‰∫ÜÂóéÔºü</div>
</div>

<script>
  let timer = null;
  let totalSeconds = 0;
  let isRunning = false;
  let audioContext = null;
  let alarmInterval = null;

  function updateDisplay() {
      const m = Math.floor(totalSeconds / 60);
      const s = totalSeconds % 60;
      document.getElementById('display').textContent = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
  }

  function startTimer() {
      if (isRunning) return;

      const minutes = parseInt(document.getElementById('minutes').value) || 0;
      const seconds = parseInt(document.getElementById('seconds').value) || 0;

      if (totalSeconds === 0) {
          totalSeconds = minutes * 60 + seconds;
      }

      if (totalSeconds <= 0) return;

      isRunning = true;
      document.getElementById('status').textContent = 'Êúà‰πãÂäõÈáèÔºåÂïüÂãïÔºÅÂ∞àÊ≥®Êà∞È¨•‰∏≠... üí™‚ú®';

      timer = setInterval(() => {
          totalSeconds--;
          updateDisplay();

          if (totalSeconds <= 0) {
              finishTimer();
          }
      }, 1000);
  }

  function stopTimer() {
      if (!isRunning) return;
      isRunning = false;
      clearInterval(timer);
      document.getElementById('status').textContent = 'ËÆäË∫´Êö´ÂÅú‰∏≠... Á®ç‰Ωú‰ºëÊÅØ üåôüí§';
  }

  function resetTimer() {
      isRunning = false;
      clearInterval(timer);
      totalSeconds = 0;
      const minutes = parseInt(document.getElementById('minutes').value) || 25;
      const seconds = parseInt(document.getElementById('seconds').value) || 0;
      totalSeconds = minutes * 60 + seconds;
      updateDisplay();
      document.getElementById('status').textContent = 'ÁÇ∫‰∫ÜÊÑõËàáÊ≠£Áæ©ÔºåÊ∫ñÂÇôÂ•Ω‰∫ÜÂóéÔºü ‚ú®';
      document.getElementById('container').classList.remove('finished');
      stopAlarm();
  }

  function finishTimer() {
      isRunning = false;
      clearInterval(timer);
      document.getElementById('status').textContent = '‰ªªÂãôÂÆåÊàêÔºÅÁæéÂ∞ëÂ•≥Êà∞Â£´ÂãùÂà©ÔºÅüéâüåô‚ú®';
      document.getElementById('container').classList.add('finished');
      playAlarm();
  }

  function playAlarm() {
      if (!audioContext) {
          audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }

      const playMagicalSound = () => {
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();

          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);

          oscillator.frequency.setValueAtTime(523, audioContext.currentTime);
          oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.2);
          oscillator.frequency.setValueAtTime(784, audioContext.currentTime + 0.4);

          gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.8);

          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.8);
      };

      playMagicalSound();
      setTimeout(playMagicalSound, 1000);
      setTimeout(playMagicalSound, 2000);

      alarmInterval = setInterval(() => {
          playMagicalSound();
          setTimeout(playMagicalSound, 1000);
          setTimeout(playMagicalSound, 2000);
      }, 4000);
  }

  function stopAlarm() {
      if (alarmInterval) {
          clearInterval(alarmInterval);
          alarmInterval = null;
      }
  }

  document.getElementById('minutes').addEventListener('input', resetTimer);
  document.getElementById('seconds').addEventListener('input', resetTimer);

  resetTimer();
</script>
</body>
</html>